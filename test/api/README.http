# Base-Gin API æµ‹è¯•å¥—ä»¶
# 
# è¿™æ˜¯ä¸»è¦çš„æµ‹è¯•å…¥å£æ–‡ä»¶ï¼ŒåŒ…å«äº†å®Œæ•´çš„APIæµ‹è¯•æµç¨‹
# 
# æµ‹è¯•ç›®å½•ç»“æž„:
# â”œâ”€â”€ common/          # é€šç”¨æµ‹è¯•ï¼ˆå¥åº·æ£€æŸ¥ç­‰ï¼‰
# â”œâ”€â”€ user/            # ç”¨æˆ·ç›¸å…³æµ‹è¯•
# â”‚   â”œâ”€â”€ crud.http        # åŸºç¡€CRUDæ“ä½œ
# â”‚   â”œâ”€â”€ validation.http  # éªŒè¯å’Œé”™è¯¯å¤„ç†
# â”‚   â”œâ”€â”€ boundary.http    # è¾¹ç•Œæµ‹è¯•
# â”‚   â””â”€â”€ performance.http # æ€§èƒ½æµ‹è¯•
# â””â”€â”€ env/             # çŽ¯å¢ƒé…ç½®
#     â”œâ”€â”€ development.http # å¼€å‘çŽ¯å¢ƒ
#     â””â”€â”€ production.http  # ç”Ÿäº§çŽ¯å¢ƒ

@hostname = localhost
@port = 8080
@baseUrl = http://{{hostname}}:{{port}}
@apiBase = {{baseUrl}}/api/v1
@jsonContentType = application/json

# æµ‹è¯•æµç¨‹è¯´æ˜Žï¼š
# 1. é¦–å…ˆè¿è¡Œå¥åº·æ£€æŸ¥ç¡®ä¿æœåŠ¡æ­£å¸¸
# 2. ç„¶åŽè¿è¡Œç”¨æˆ·CRUDæµ‹è¯•éªŒè¯åŸºæœ¬åŠŸèƒ½
# 3. è¿è¡ŒéªŒè¯æµ‹è¯•ç¡®ä¿é”™è¯¯å¤„ç†æ­£ç¡®
# 4. è¿è¡Œè¾¹ç•Œæµ‹è¯•éªŒè¯ç‰¹æ®Šæƒ…å†µ
# 5. æœ€åŽè¿è¡Œæ€§èƒ½æµ‹è¯•éªŒè¯ç³»ç»Ÿè¡¨çŽ°

### å¿«é€Ÿå¥åº·æ£€æŸ¥
GET {{baseUrl}}/health
Accept: {{jsonContentType}}

> {%
  client.test("æœåŠ¡çŠ¶æ€æ£€æŸ¥", function() {
    client.assert(response.status === 200, "æœåŠ¡åº”è¯¥æ­£å¸¸è¿è¡Œ");
    console.log("âœ… æœåŠ¡å¥åº·æ£€æŸ¥é€šè¿‡");
  });
%}

###

### å¿«é€ŸAPIå¯ç”¨æ€§æ£€æŸ¥
GET {{apiBase}}/users
Accept: {{jsonContentType}}

> {%
  client.test("APIå¯ç”¨æ€§æ£€æŸ¥", function() {
    client.assert(response.status === 200, "ç”¨æˆ·APIåº”è¯¥å¯ç”¨");
    console.log("âœ… APIå¯ç”¨æ€§æ£€æŸ¥é€šè¿‡");
    console.log("ðŸ“Š å½“å‰ç”¨æˆ·æ•°é‡: " + (response.body.data ? response.body.data.length : 0));
  });
%}

###

# ðŸš€ æµ‹è¯•å¥—ä»¶ä½¿ç”¨è¯´æ˜Ž:
#
# 1. å¼€å‘çŽ¯å¢ƒå¿«é€Ÿæµ‹è¯•:
#    - è¿è¡Œæœ¬æ–‡ä»¶çš„å¥åº·æ£€æŸ¥éƒ¨åˆ†
#    - ç„¶åŽè¿è¡Œ user/crud.http è¿›è¡ŒåŸºç¡€åŠŸèƒ½æµ‹è¯•
#
# 2. å®Œæ•´å›žå½’æµ‹è¯•:
#    - common/health.http      (åŸºç¡€å¥åº·æ£€æŸ¥)
#    - user/crud.http          (ç”¨æˆ·CRUDæ“ä½œ)
#    - user/validation.http    (éªŒè¯å’Œé”™è¯¯å¤„ç†)
#    - user/boundary.http      (è¾¹ç•Œå’Œç‰¹æ®Šåœºæ™¯)
#    - user/performance.http   (æ€§èƒ½å’Œå¹¶å‘æµ‹è¯•)
#
# 3. çŽ¯å¢ƒåˆ‡æ¢:
#    - ä¿®æ”¹ä¸Šæ–¹çš„ @hostname å’Œ @port å˜é‡
#    - æˆ–è€…ä½¿ç”¨ env/ ç›®å½•ä¸‹çš„çŽ¯å¢ƒé…ç½®æ–‡ä»¶
#
# 4. æµ‹è¯•æ•°æ®æ¸…ç†:
#    - æ€§èƒ½æµ‹è¯•ä¼šè‡ªåŠ¨æ¸…ç†åˆ›å»ºçš„æµ‹è¯•æ•°æ®
#    - æ‰‹åŠ¨æ¸…ç†å¯ä»¥é€šè¿‡åˆ é™¤æŽ¥å£åˆ é™¤æŒ‡å®šç”¨æˆ·

### æµ‹è¯•çŽ¯å¢ƒä¿¡æ¯æ˜¾ç¤º
GET {{baseUrl}}/health
Accept: {{jsonContentType}}

> {%
  client.test("çŽ¯å¢ƒä¿¡æ¯", function() {
    console.log("ðŸ”§ æµ‹è¯•çŽ¯å¢ƒé…ç½®:");
    console.log("   æœåŠ¡åœ°å€: " + "{{baseUrl}}");
    console.log("   APIå‰ç¼€: " + "{{apiBase}}");
    console.log("   æµ‹è¯•æ—¶é—´: " + new Date().toLocaleString());
  });
%}

### æµ‹è¯•è„šæœ¬è¿è¡Œç¡®è®¤
# ç¡®è®¤è„šæœ¬æ˜¯å¦æ­£å¸¸è¿è¡Œ

GET https://httpbin.org/get

> {%
  console.log("TEST: Script is running");
%}